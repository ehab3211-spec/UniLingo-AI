<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UniLingo AI - Ø³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„</title>
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #050a15; color: white; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .step-inactive { opacity: 0.3; filter: grayscale(1); transition: all 0.5s ease; }
        .step-active { opacity: 1; filter: grayscale(0); border-color: #f59e0b; transform: scale(1.05); }
        .pulse-orange { animation: pulse 2s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(245, 158, 11, 0); } 100% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0); } }
    </style>
</head>
<body class="p-4 overflow-x-hidden">

    <div class="max-w-3xl mx-auto py-8">
        <div class="text-center mb-12">
            <h1 class="text-3xl font-bold text-yellow-500 mb-2">UniLingo AI Engine</h1>
            <p class="text-slate-400">ØªØªØ¨Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø·Ù„Ø¨Ùƒ Ø¹Ø¨Ø± Ø´Ø¨ÙƒØ© Pi ÙˆØ§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-12">
            <div id="step1" class="step-active border-2 border-slate-700 bg-slate-900/50 p-4 rounded-2xl text-center">
                <div class="text-2xl mb-2">ğŸ’³</div>
                <div class="font-bold text-sm">1. ØªØ£Ù…ÙŠÙ† Ø§Ù„Ø¯ÙØ¹</div>
                <div class="text-[10px] text-slate-500">ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ø¹Ø¨Ø± Pi SDK</div>
            </div>
            <div id="step2" class="step-inactive border-2 border-slate-700 bg-slate-900/50 p-4 rounded-2xl text-center">
                <div class="text-2xl mb-2">ğŸ§ </div>
                <div class="font-bold text-sm">2. ØªØ­Ù„ÙŠÙ„ AI</div>
                <div class="text-[10px] text-slate-500">ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø·Ù„Ø¨ (GPT/Claude)</div>
            </div>
            <div id="step3" class="step-inactive border-2 border-slate-700 bg-slate-900/50 p-4 rounded-2xl text-center">
                <div class="text-2xl mb-2">âœ¨</div>
                <div class="font-bold text-sm">3. Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</div>
                <div class="text-[10px] text-slate-500">Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª Ø§Ù„Ù…ØªØ±Ø¬Ù…Ø©</div>
            </div>
        </div>

        <div class="bg-slate-900 border border-slate-800 p-6 rounded-3xl shadow-2xl mb-6">
            <textarea id="userInput" class="w-full bg-transparent text-lg border-none focus:ring-0 h-32 text-right" placeholder="Ø£Ø¯Ø®Ù„ Ø·Ù„Ø¨Ùƒ Ù‡Ù†Ø§ Ù„ÙØªØ­ Ø³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„..."></textarea>
            
            <div class="flex items-center justify-between mt-4 border-t border-slate-800 pt-6">
                <div class="flex items-center gap-2">
                    <span class="text-yellow-500 font-mono">1.00 Pi</span>
                    <span class="text-xs text-slate-500">Ø±Ø³ÙˆÙ… Ø§Ù„Ø®Ø¯Ù…Ø©</span>
                </div>
                <button onclick="startWorkflow()" class="bg-yellow-500 hover:bg-yellow-400 text-black font-bold py-3 px-8 rounded-xl transition-all flex items-center gap-2 pulse-orange">
                    <span>Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" /></svg>
                </button>
            </div>
        </div>

        <div id="liveStatus" class="hidden animate-pulse text-center text-yellow-500 text-sm font-medium mb-6">
            Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ù…Ø­ÙØ¸Ø© Pi...
        </div>

        <div id="finalResult" class="hidden space-y-4">
            <div class="bg-gradient-to-r from-yellow-500/10 to-transparent p-6 rounded-3xl border border-yellow-500/20">
                <p id="responseText" class="text-slate-300 leading-relaxed"></p>
            </div>
        </div>
    </div>

    <script>
        const Pi = window.Pi;
        Pi.init({ version: "1.5", sandbox: true });

        async function startWorkflow() {
            const input = document.getElementById('userInput').value;
            if (!input) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù†Øµ!");

            // ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
            document.getElementById('liveStatus').classList.remove('hidden');
            
            try {
                // Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Ø§Ù„Ø¯ÙØ¹
                setActiveStep(1);
                const payment = await Pi.createPayment({
                    amount: 1,
                    memo: "UniLingo AI Workflow Test",
                    metadata: { step: 1 }
                }, {
                    onReadyForServerCompletion: (id, txid) => {
                        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ù…Ø±Ø­Ù„Ø© 2: AI
                        setActiveStep(2);
                        document.getElementById('liveStatus').innerText = "ØªÙ… ØªØ£Ù…ÙŠÙ† Ø§Ù„Ø¯ÙØ¹. Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ù…Ø­Ø±Ùƒ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ...";
                        processAI(input);
                    }
                });
            } catch (e) {
                document.getElementById('liveStatus').innerText = "ØªÙˆÙ‚ÙØª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¹Ù†Ø¯ Ø®Ø·ÙˆØ© Ø§Ù„Ø¯ÙØ¹.";
            }
        }

        function setActiveStep(stepNumber) {
            for(let i=1; i<=3; i++) {
                const el = document.getElementById('step' + i);
                el.classList.remove('step-active');
                el.classList.add('step-inactive');
            }
            document.getElementById('step' + stepNumber).classList.add('step-active');
            document.getElementById('step' + stepNumber).classList.remove('step-inactive');
        }

        async function processAI(text) {
            // Ù…Ø­Ø§ÙƒØ§Ø© Ø²Ù…Ù† Ù…Ø¹Ø§Ù„Ø¬Ø© AI
            setTimeout(() => {
                // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ù…Ø±Ø­Ù„Ø© 3: Ø§Ù„Ù†ØªÙŠØ¬Ø©
                setActiveStep(3);
                document.getElementById('liveStatus').innerText = "ØªÙ…Øª Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¨Ù†Ø¬Ø§Ø­ âœ…";
                document.getElementById('finalResult').classList.remove('hidden');
                document.getElementById('responseText').innerText = "Ù†ØªÙŠØ¬Ø© UniLingo AI Ø§Ù„Ø°ÙƒÙŠØ© Ù„Ø·Ù„Ø¨Ùƒ: " + text;
            }, 3000);
        }
    </script>
</body>
</html>
