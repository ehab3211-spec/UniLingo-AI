<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UniLingo AI 2026 - Pi Network</title>
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0f172a; color: white; font-family: sans-serif; }
        .pi-gradient { background: linear-gradient(135deg, #ffcc00, #db7b00); }
    </style>
</head>
<body class="p-4 md:p-10">

    <div class="max-w-2xl mx-auto">
        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold text-yellow-500 mb-2">UniLingo AI ğŸŒğŸ¤–</h1>
            <p id="status" class="text-sm text-gray-400">Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø´Ø¨ÙƒØ© Ø¨Ø§ÙŠ...</p>
        </header>

        <div class="bg-slate-800 p-6 rounded-2xl shadow-xl border border-slate-700">
            <label class="block mb-2 text-gray-300">Ø£Ø¯Ø®Ù„ Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø±Ø§Ø¯ Ù…Ø¹Ø§Ù„Ø¬ØªÙ‡:</label>
            <textarea id="userInput" rows="5" 
                class="w-full p-4 bg-slate-900 border border-slate-700 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:outline-none transition-all"
                placeholder="Ù…Ø«Ù„Ø§Ù‹: ØªØ±Ø¬Ù… Ù‡Ø°Ø§ Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ø£Ùˆ Ø§Ø´Ø±Ø­ Ù„ÙŠ ÙÙƒØ±Ø©..."></textarea>
            
            <button onclick="handleProcess()" 
                class="w-full mt-6 pi-gradient text-slate-900 font-bold py-4 rounded-full text-lg hover:scale-105 active:scale-95 transition-transform shadow-lg">
                Ø¯ÙØ¹ 1 Pi ÙˆØ§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
            </button>
        </div>

        <div id="resultContainer" class="hidden mt-8 p-6 bg-slate-800 rounded-2xl border-l-4 border-yellow-500">
            <h3 class="text-yellow-500 font-bold mb-2">Ø§Ù„Ù†ØªÙŠØ¬Ø©:</h3>
            <p id="aiResponse" class="text-gray-200 leading-relaxed"></p>
        </div>
    </div>

    <script>
        // 1. ØªÙ‡ÙŠØ¦Ø© ØªØ·Ø¨ÙŠÙ‚ Pi
        const Pi = window.Pi;
        Pi.init({ version: "1.5", sandbox: true }); // sandbox: true Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±

        const statusEl = document.getElementById('status');
        const resultContainer = document.getElementById('resultContainer');
        const aiResponse = document.getElementById('aiResponse');

        async function handleProcess() {
            const input = document.getElementById('userInput').value;
            if (!input) return alert("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ù†Øµ Ø£ÙˆÙ„Ø§Ù‹!");

            statusEl.innerText = "Ø¬Ø§Ø±ÙŠ Ø·Ù„Ø¨ Ø§Ù„Ø¯ÙØ¹ Ù…Ù† Ù…Ø­ÙØ¸Ø© Pi...";

            try {
                // 2. Ø·Ù„Ø¨ Ø§Ù„Ø¯ÙØ¹ (Payment Flow)
                const payment = await Pi.createPayment({
                    amount: 1,
                    memo: "UniLingo AI Service 2026",
                    metadata: { service: "translation_ai" }
                }, {
                    onReadyForServerApproval: (paymentId) => {
                        console.log("Ø§Ù„Ø·Ù„Ø¨ ÙŠÙ†ØªØ¸Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©:", paymentId);
                        // ÙÙŠ ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù€ Native ÙŠØªÙ… Ø§Ù„ØªØ£ÙƒÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙÙŠ Sandbox
                    },
                    onReadyForServerCompletion: (paymentId, txid) => {
                        statusEl.innerText = "ØªÙ… Ø§Ù„Ø¯ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­! Ø¬Ø§Ø±ÙŠ ØªØ´ØºÙŠÙ„ AI...";
                        callAI(input); // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¨Ø¹Ø¯ Ù†Ø¬Ø§Ø­ Ø§Ù„Ø¯ÙØ¹
                    },
                    onCancel: () => { statusEl.innerText = "ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¯ÙØ¹."; },
                    onError: (error) => { statusEl.innerText = "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¯ÙØ¹: " + error.message; }
                });
            } catch (err) {
                console.error(err);
                statusEl.innerText = "Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹.";
            }
        }

        // 3. Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ (Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ø¨Ø± API)
        async function callAI(text) {
            try {
                // Ù…Ù„Ø§Ø­Ø¸Ø©: ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© ÙŠÙØ¶Ù„ ÙˆØ¶Ø¹ Ù‡Ø°Ø§ ÙÙŠ Proxy Ù„Ø­Ù…Ø§ÙŠØ© Ù…ÙØªØ§Ø­Ùƒ
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': 'Bearer YOUR_OPENAI_API_KEY', // Ø¶Ø¹ Ù…ÙØªØ§Ø­Ùƒ Ù‡Ù†Ø§
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: "gpt-4",
                        messages: [{ role: "user", content: text }]
                    })
                });

                const data = await response.json();
                resultContainer.classList.remove('hidden');
                aiResponse.innerText = data.choices[0].message.content;
                statusEl.innerText = "ØªÙ…Øª Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© âœ…";
            } catch (error) {
                aiResponse.innerText = "ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù…Ø­Ø±Ùƒ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ.";
            }
        }
    </script>
</body>
</html>
